/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target, mod));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/valid-url/index.js
var require_valid_url = __commonJS({
  "node_modules/valid-url/index.js"(exports, module2) {
    (function(module3) {
      "use strict";
      module3.exports.is_uri = is_iri;
      module3.exports.is_http_uri = is_http_iri;
      module3.exports.is_https_uri = is_https_iri;
      module3.exports.is_web_uri = is_web_iri;
      module3.exports.isUri = is_iri;
      module3.exports.isHttpUri = is_http_iri;
      module3.exports.isHttpsUri = is_https_iri;
      module3.exports.isWebUri = is_web_iri;
      var splitUri = function(uri) {
        var splitted = uri.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);
        return splitted;
      };
      function is_iri(value) {
        if (!value) {
          return;
        }
        if (/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(value))
          return;
        if (/%[^0-9a-f]/i.test(value))
          return;
        if (/%[0-9a-f](:?[^0-9a-f]|$)/i.test(value))
          return;
        var splitted = [];
        var scheme = "";
        var authority = "";
        var path = "";
        var query = "";
        var fragment = "";
        var out = "";
        splitted = splitUri(value);
        scheme = splitted[1];
        authority = splitted[2];
        path = splitted[3];
        query = splitted[4];
        fragment = splitted[5];
        if (!(scheme && scheme.length && path.length >= 0))
          return;
        if (authority && authority.length) {
          if (!(path.length === 0 || /^\//.test(path)))
            return;
        } else {
          if (/^\/\//.test(path))
            return;
        }
        if (!/^[a-z][a-z0-9\+\-\.]*$/.test(scheme.toLowerCase()))
          return;
        out += scheme + ":";
        if (authority && authority.length) {
          out += "//" + authority;
        }
        out += path;
        if (query && query.length) {
          out += "?" + query;
        }
        if (fragment && fragment.length) {
          out += "#" + fragment;
        }
        return out;
      }
      function is_http_iri(value, allowHttps) {
        if (!is_iri(value)) {
          return;
        }
        var splitted = [];
        var scheme = "";
        var authority = "";
        var path = "";
        var port = "";
        var query = "";
        var fragment = "";
        var out = "";
        splitted = splitUri(value);
        scheme = splitted[1];
        authority = splitted[2];
        path = splitted[3];
        query = splitted[4];
        fragment = splitted[5];
        if (!scheme)
          return;
        if (allowHttps) {
          if (scheme.toLowerCase() != "https")
            return;
        } else {
          if (scheme.toLowerCase() != "http")
            return;
        }
        if (!authority) {
          return;
        }
        if (/:(\d+)$/.test(authority)) {
          port = authority.match(/:(\d+)$/)[0];
          authority = authority.replace(/:\d+$/, "");
        }
        out += scheme + ":";
        out += "//" + authority;
        if (port) {
          out += port;
        }
        out += path;
        if (query && query.length) {
          out += "?" + query;
        }
        if (fragment && fragment.length) {
          out += "#" + fragment;
        }
        return out;
      }
      function is_https_iri(value) {
        return is_http_iri(value, true);
      }
      function is_web_iri(value) {
        return is_http_iri(value) || is_https_iri(value);
      }
    })(module2);
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => FrontmatterLinksPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// src/editor_plugin.ts
var import_language = require("@codemirror/language");
var import_state = require("@codemirror/state");
var import_view2 = require("@codemirror/view");

// src/link_widget.ts
var import_view = require("@codemirror/view");
var import_obsidian = require("obsidian");
var import_valid_url = __toESM(require_valid_url());
var FrontmatterLinkWidget = class extends import_view.WidgetType {
  constructor(linkSlice) {
    super();
    this.linkSlice = linkSlice;
  }
  toDOM(view) {
    const aElement = document.createElement("a");
    aElement.href = this.linkSlice.href;
    aElement.innerText = this.linkSlice.alias || this.linkSlice.href;
    if ((0, import_valid_url.isUri)(this.linkSlice.href)) {
      aElement.addClass(this.linkSlice.markdownLink ? "external-link" : "cm-url");
    } else {
      aElement.addClass("internal-link");
      if (!(app.metadataCache.getFirstLinkpathDest(this.linkSlice.href, "") instanceof import_obsidian.TFile) && !this.linkSlice.markdownLink) {
        aElement.addClass("is-unresolved");
      }
    }
    return aElement;
  }
};

// src/editor_plugin.ts
var import_valid_url2 = __toESM(require_valid_url());
var import_obsidian2 = require("obsidian");
var FrontmatterLinksEditorPlugin = class {
  constructor(view) {
    this.linkSlices = new Array();
    this.linkSlices = new Array();
    this.decorations = this.buildDecorations(view);
  }
  update(update) {
    if (update.docChanged || update.viewportChanged || update.selectionSet) {
      this.decorations = this.buildDecorations(update.view);
    }
  }
  destroy() {
  }
  buildDecorations(view) {
    const builder = new import_state.RangeSetBuilder();
    this.linkSlices = new Array();
    this.findLinks(view, this.linkSlices);
    this.processLinks(view, builder);
    return builder.finish();
  }
  findLinks(view, linkSlices) {
    const settings = app.plugins.plugins["frontmatter-links"].settings;
    let externalLinkFrom;
    let externalLinkTo;
    for (let { from, to } of view.visibleRanges) {
      (0, import_language.syntaxTree)(view.state).iterate({
        from,
        to,
        enter(node) {
          if (externalLinkFrom === null) {
            if (node.name === "hmd-frontmatter") {
              externalLinkFrom = node.from;
              externalLinkTo = node.to;
            }
          } else {
            if (node.name === "atom_hmd-frontmatter" || node.name === "def_hmd-frontmatter") {
              let text = view.state.sliceDoc(externalLinkFrom, externalLinkTo);
              if ((0, import_valid_url2.isUri)(text)) {
                linkSlices.push({
                  originalText: text,
                  href: text,
                  from: externalLinkFrom,
                  to: externalLinkTo
                });
              }
              externalLinkFrom = null;
            } else {
              externalLinkTo = node.to;
            }
          }
          if (node.name === "hmd-frontmatter_string") {
            const text = view.state.sliceDoc(node.from + 1, node.to - 1);
            let match;
            let href;
            let alias;
            let markdownLink;
            if (match = text.match(/\[\[(.+)\|(.+)\]\]/m)) {
              href = match[1];
              alias = match[2];
            } else if (match = text.match(/\[\[(.+)\]\]/m)) {
              href = match[1];
            } else if (match = text.match(/\[(.+)\]\((.+)\)/m)) {
              href = match[2];
              alias = match[1];
              markdownLink = true;
            } else if ((0, import_valid_url2.isUri)(text)) {
              href = text;
            }
            if (href) {
              linkSlices.push({
                originalText: text,
                href,
                alias,
                from: node.from + (settings.hideQuotes ? 0 : 1),
                to: node.to - (settings.hideQuotes ? 0 : 1),
                markdownLink
              });
            }
          }
        }
      });
    }
  }
  processLinks(view, builder) {
    for (let linkSlice of this.linkSlices) {
      const cursorHead = view.state.selection.main.head;
      if (linkSlice.from - 1 <= cursorHead && cursorHead <= linkSlice.to + 1) {
        this.styleLink(view, builder, linkSlice);
      } else {
        builder.add(linkSlice.from, linkSlice.to, import_view2.Decoration.replace({ widget: new FrontmatterLinkWidget(linkSlice) }));
      }
    }
  }
  styleLink(view, builder, linkSlice) {
    const settings = app.plugins.plugins["frontmatter-links"].settings;
    const unresolved = !(app.metadataCache.getFirstLinkpathDest(linkSlice.href, "") instanceof import_obsidian2.TFile);
    const text = view.state.sliceDoc(linkSlice.from, linkSlice.to);
    let match;
    if (match = text.match(/\[\[(.+)\|(.+)\]\]/m)) {
      builder.add(linkSlice.from + (settings.hideQuotes ? 1 : 0), linkSlice.from + 2 + (settings.hideQuotes ? 1 : 0), import_view2.Decoration.mark({ class: "cm-formatting-link cm-formatting-link-start" }));
      builder.add(linkSlice.from + text.indexOf(match[1]), linkSlice.from + text.indexOf(match[1]) + match[1].length, import_view2.Decoration.mark({ class: "cm-link" + (unresolved ? " is-unresolved" : "") }));
      builder.add(linkSlice.from + text.indexOf(match[1]) + match[1].length, linkSlice.from + text.indexOf(match[1]) + match[1].length + 1, import_view2.Decoration.mark({ class: "cm-hmd-internal-link" }));
      builder.add(linkSlice.from + text.indexOf(match[2]), linkSlice.from + text.indexOf(match[2]) + match[2].length, import_view2.Decoration.mark({ class: "cm-link" + (unresolved ? " is-unresolved" : "") }));
      builder.add(linkSlice.to - 2 - (settings.hideQuotes ? 1 : 0), linkSlice.to - (settings.hideQuotes ? 1 : 0), import_view2.Decoration.mark({ class: "cm-formatting-link cm-formatting-link-end" }));
    } else if (match = text.match(/\[\[(.+)\]\]/m)) {
      builder.add(linkSlice.from + (settings.hideQuotes ? 1 : 0), linkSlice.from + 2 + (settings.hideQuotes ? 1 : 0), import_view2.Decoration.mark({ class: "cm-formatting-link cm-formatting-link-start" }));
      builder.add(linkSlice.from + text.indexOf(match[1]), linkSlice.from + text.indexOf(match[1]) + match[1].length, import_view2.Decoration.mark({ class: "cm-link" + (unresolved ? " is-unresolved" : "") }));
      builder.add(linkSlice.to - 2 - (settings.hideQuotes ? 1 : 0), linkSlice.to - (settings.hideQuotes ? 1 : 0), import_view2.Decoration.mark({ class: "cm-formatting-link cm-formatting-link-end" }));
    } else if (match = text.match(/\[(.+)\](\(.+\))/m)) {
      builder.add(linkSlice.from + (settings.hideQuotes ? 1 : 0), linkSlice.from + 1 + (settings.hideQuotes ? 1 : 0), import_view2.Decoration.mark({ class: "cm-formatting-link cm-formatting-link-start" }));
      builder.add(linkSlice.from + text.indexOf(match[1]), linkSlice.from + text.indexOf(match[1]) + match[1].length, import_view2.Decoration.mark({ class: "cm-link" }));
      builder.add(linkSlice.from + text.indexOf("]"), linkSlice.from + text.indexOf("]") + 1, import_view2.Decoration.mark({ class: "cm-formatting-link cm-formatting-link-end" }));
      builder.add(linkSlice.from + text.indexOf(match[2]), linkSlice.from + text.indexOf(match[2]) + match[2].length, import_view2.Decoration.mark({ class: (0, import_valid_url2.isUri)(linkSlice.href) ? "external-link" : "cm-url" }));
    } else if (match = text.match(/\"(.+)\"/m)) {
      builder.add(linkSlice.from + text.indexOf(match[1]), linkSlice.from + text.indexOf(match[1]) + match[1].length, import_view2.Decoration.mark({ class: "cm-url" }));
    } else if ((0, import_valid_url2.isUri)(text)) {
      builder.add(linkSlice.from, linkSlice.to, import_view2.Decoration.mark({ class: "cm-url" }));
    }
  }
};
var FRONTMATTER_LINKS_EDITOR_PLUGIN = import_view2.ViewPlugin.fromClass(FrontmatterLinksEditorPlugin, {
  decorations: (value) => value.decorations
});

// src/metadata_cache.ts
var import_obsidian3 = require("obsidian");
var import_valid_url3 = __toESM(require_valid_url());
function onMetadataCacheResolve(file) {
  const cache = app.metadataCache.getFileCache(file);
  if (!cache) {
    return;
  }
  const frontmatter = cache.frontmatter;
  if (!frontmatter) {
    return;
  }
  addFrontmatterLinksToCache(file, frontmatter);
}
function addFrontmatterLinksToCache(file, frontmatter) {
  if (!frontmatter) {
    return;
  }
  for (let key of Object.keys(frontmatter)) {
    const value = frontmatter[key];
    if (typeof value === "string") {
      const match = value.match(/\[\[(.+)\|.+\]\]/m) || value.match(/\[\[(.+)\]\]/m) || value.match(/\[.+\]\((.+)\)/m);
      if (!match) {
        continue;
      }
      let href = match[1];
      if ((0, import_valid_url3.isUri)(href)) {
        continue;
      }
      let f = app.metadataCache.getFirstLinkpathDest(href, "");
      let links;
      if (f instanceof import_obsidian3.TFile) {
        href = f.path;
        links = app.metadataCache.resolvedLinks;
      } else {
        links = app.metadataCache.unresolvedLinks;
      }
      if (links[file.path][href]) {
        links[file.path][href] += 1;
      } else {
        links[file.path][href] = 1;
      }
    } else if (typeof value === "object") {
      addFrontmatterLinksToCache(file, value);
    }
  }
}

// src/settings.ts
var import_obsidian4 = require("obsidian");
var DEFAULT_SETTINGS = {
  hideQuotes: false,
  addToGraph: true,
  updateLinks: true
};
var FrontmatterLinksSettingTab = class extends import_obsidian4.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    new import_obsidian4.Setting(this.containerEl).setName("Hide quotation marks").setDesc("Don't render quotation marks surrounding frontmatter links.").addToggle((component) => {
      component.setValue(this.plugin.settings.hideQuotes);
      component.onChange((value) => {
        this.plugin.settings.hideQuotes = value;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian4.Setting(this.containerEl).setName("Add to graph").setDesc("Add frontmatter link connections to the graph view.").addToggle((component) => {
      component.setValue(this.plugin.settings.addToGraph);
      component.onChange((value) => {
        app.metadataCache.initialize();
        this.plugin.settings.addToGraph = value;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian4.Setting(this.containerEl).setName("Automatically update internal frontmatter links").setDesc("Turn on to update frontmatter links when a note is renamed.<br>'Automatically update internal links' in 'Files & Links' must also be enabled.").setDesc(createFragment((el) => {
      el.appendText("Turn on to update frontmatter links when a note is renamed.");
      el.createEl("br");
      el.createEl("div", {
        cls: "mod-warning",
        text: "Disabled because it was causing issues. Will fix next week after finals. Sorry."
      });
    })).addToggle((component) => {
      component.setValue(this.plugin.settings.updateLinks);
      component.onChange((value) => {
        this.plugin.settings.updateLinks = value;
        this.plugin.saveSettings();
      });
    }).setDisabled(true);
  }
  hide() {
    this.containerEl.empty();
  }
};

// src/main.ts
var FrontmatterLinksPlugin = class extends import_obsidian5.Plugin {
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new FrontmatterLinksSettingTab(this.app, this));
    this.registerEditorExtension(FRONTMATTER_LINKS_EDITOR_PLUGIN);
    if (this.settings.addToGraph) {
      app.metadataCache.initialize();
    }
    const plugin = this;
    this.registerEvent(app.metadataCache.on("resolve", (file) => {
      if (!plugin.settings.addToGraph) {
        return;
      }
      onMetadataCacheResolve(file);
    }));
    this.registerEvent(app.vault.on("rename", (file, oldPath) => {
      if (plugin.settings.updateLinks && app.vault.getConfig("alwaysUpdateLinks")) {
      }
    }));
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
    this.settings.updateLinks = false;
    this.saveSettings();
  }
  async saveSettings() {
    this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL3ZhbGlkLXVybC9pbmRleC5qcyIsICJzcmMvbWFpbi50cyIsICJzcmMvZWRpdG9yX3BsdWdpbi50cyIsICJzcmMvbGlua193aWRnZXQudHMiLCAic3JjL21ldGFkYXRhX2NhY2hlLnRzIiwgInNyYy9zZXR0aW5ncy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiKGZ1bmN0aW9uKG1vZHVsZSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIG1vZHVsZS5leHBvcnRzLmlzX3VyaSA9IGlzX2lyaTtcbiAgICBtb2R1bGUuZXhwb3J0cy5pc19odHRwX3VyaSA9IGlzX2h0dHBfaXJpO1xuICAgIG1vZHVsZS5leHBvcnRzLmlzX2h0dHBzX3VyaSA9IGlzX2h0dHBzX2lyaTtcbiAgICBtb2R1bGUuZXhwb3J0cy5pc193ZWJfdXJpID0gaXNfd2ViX2lyaTtcbiAgICAvLyBDcmVhdGUgYWxpYXNlc1xuICAgIG1vZHVsZS5leHBvcnRzLmlzVXJpID0gaXNfaXJpO1xuICAgIG1vZHVsZS5leHBvcnRzLmlzSHR0cFVyaSA9IGlzX2h0dHBfaXJpO1xuICAgIG1vZHVsZS5leHBvcnRzLmlzSHR0cHNVcmkgPSBpc19odHRwc19pcmk7XG4gICAgbW9kdWxlLmV4cG9ydHMuaXNXZWJVcmkgPSBpc193ZWJfaXJpO1xuXG5cbiAgICAvLyBwcml2YXRlIGZ1bmN0aW9uXG4gICAgLy8gaW50ZXJuYWwgVVJJIHNwaXR0ZXIgbWV0aG9kIC0gZGlyZWN0IGZyb20gUkZDIDM5ODZcbiAgICB2YXIgc3BsaXRVcmkgPSBmdW5jdGlvbih1cmkpIHtcbiAgICAgICAgdmFyIHNwbGl0dGVkID0gdXJpLm1hdGNoKC8oPzooW146XFwvPyNdKyk6KT8oPzpcXC9cXC8oW15cXC8/I10qKSk/KFtePyNdKikoPzpcXD8oW14jXSopKT8oPzojKC4qKSk/Lyk7XG4gICAgICAgIHJldHVybiBzcGxpdHRlZDtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gaXNfaXJpKHZhbHVlKSB7XG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNoZWNrIGZvciBpbGxlZ2FsIGNoYXJhY3RlcnNcbiAgICAgICAgaWYgKC9bXmEtejAtOVxcOlxcL1xcP1xcI1xcW1xcXVxcQFxcIVxcJFxcJlxcJ1xcKFxcKVxcKlxcK1xcLFxcO1xcPVxcLlxcLVxcX1xcflxcJV0vaS50ZXN0KHZhbHVlKSkgcmV0dXJuO1xuXG4gICAgICAgIC8vIGNoZWNrIGZvciBoZXggZXNjYXBlcyB0aGF0IGFyZW4ndCBjb21wbGV0ZVxuICAgICAgICBpZiAoLyVbXjAtOWEtZl0vaS50ZXN0KHZhbHVlKSkgcmV0dXJuO1xuICAgICAgICBpZiAoLyVbMC05YS1mXSg6P1teMC05YS1mXXwkKS9pLnRlc3QodmFsdWUpKSByZXR1cm47XG5cbiAgICAgICAgdmFyIHNwbGl0dGVkID0gW107XG4gICAgICAgIHZhciBzY2hlbWUgPSAnJztcbiAgICAgICAgdmFyIGF1dGhvcml0eSA9ICcnO1xuICAgICAgICB2YXIgcGF0aCA9ICcnO1xuICAgICAgICB2YXIgcXVlcnkgPSAnJztcbiAgICAgICAgdmFyIGZyYWdtZW50ID0gJyc7XG4gICAgICAgIHZhciBvdXQgPSAnJztcblxuICAgICAgICAvLyBmcm9tIFJGQyAzOTg2XG4gICAgICAgIHNwbGl0dGVkID0gc3BsaXRVcmkodmFsdWUpO1xuICAgICAgICBzY2hlbWUgPSBzcGxpdHRlZFsxXTsgXG4gICAgICAgIGF1dGhvcml0eSA9IHNwbGl0dGVkWzJdO1xuICAgICAgICBwYXRoID0gc3BsaXR0ZWRbM107XG4gICAgICAgIHF1ZXJ5ID0gc3BsaXR0ZWRbNF07XG4gICAgICAgIGZyYWdtZW50ID0gc3BsaXR0ZWRbNV07XG5cbiAgICAgICAgLy8gc2NoZW1lIGFuZCBwYXRoIGFyZSByZXF1aXJlZCwgdGhvdWdoIHRoZSBwYXRoIGNhbiBiZSBlbXB0eVxuICAgICAgICBpZiAoIShzY2hlbWUgJiYgc2NoZW1lLmxlbmd0aCAmJiBwYXRoLmxlbmd0aCA+PSAwKSkgcmV0dXJuO1xuXG4gICAgICAgIC8vIGlmIGF1dGhvcml0eSBpcyBwcmVzZW50LCB0aGUgcGF0aCBtdXN0IGJlIGVtcHR5IG9yIGJlZ2luIHdpdGggYSAvXG4gICAgICAgIGlmIChhdXRob3JpdHkgJiYgYXV0aG9yaXR5Lmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKCEocGF0aC5sZW5ndGggPT09IDAgfHwgL15cXC8vLnRlc3QocGF0aCkpKSByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBpZiBhdXRob3JpdHkgaXMgbm90IHByZXNlbnQsIHRoZSBwYXRoIG11c3Qgbm90IHN0YXJ0IHdpdGggLy9cbiAgICAgICAgICAgIGlmICgvXlxcL1xcLy8udGVzdChwYXRoKSkgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2NoZW1lIG11c3QgYmVnaW4gd2l0aCBhIGxldHRlciwgdGhlbiBjb25zaXN0IG9mIGxldHRlcnMsIGRpZ2l0cywgKywgLiwgb3IgLVxuICAgICAgICBpZiAoIS9eW2Etel1bYS16MC05XFwrXFwtXFwuXSokLy50ZXN0KHNjaGVtZS50b0xvd2VyQ2FzZSgpKSkgIHJldHVybjtcblxuICAgICAgICAvLyByZS1hc3NlbWJsZSB0aGUgVVJMIHBlciBzZWN0aW9uIDUuMyBpbiBSRkMgMzk4NlxuICAgICAgICBvdXQgKz0gc2NoZW1lICsgJzonO1xuICAgICAgICBpZiAoYXV0aG9yaXR5ICYmIGF1dGhvcml0eS5sZW5ndGgpIHtcbiAgICAgICAgICAgIG91dCArPSAnLy8nICsgYXV0aG9yaXR5O1xuICAgICAgICB9XG5cbiAgICAgICAgb3V0ICs9IHBhdGg7XG5cbiAgICAgICAgaWYgKHF1ZXJ5ICYmIHF1ZXJ5Lmxlbmd0aCkge1xuICAgICAgICAgICAgb3V0ICs9ICc/JyArIHF1ZXJ5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZyYWdtZW50ICYmIGZyYWdtZW50Lmxlbmd0aCkge1xuICAgICAgICAgICAgb3V0ICs9ICcjJyArIGZyYWdtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc19odHRwX2lyaSh2YWx1ZSwgYWxsb3dIdHRwcykge1xuICAgICAgICBpZiAoIWlzX2lyaSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzcGxpdHRlZCA9IFtdO1xuICAgICAgICB2YXIgc2NoZW1lID0gJyc7XG4gICAgICAgIHZhciBhdXRob3JpdHkgPSAnJztcbiAgICAgICAgdmFyIHBhdGggPSAnJztcbiAgICAgICAgdmFyIHBvcnQgPSAnJztcbiAgICAgICAgdmFyIHF1ZXJ5ID0gJyc7XG4gICAgICAgIHZhciBmcmFnbWVudCA9ICcnO1xuICAgICAgICB2YXIgb3V0ID0gJyc7XG5cbiAgICAgICAgLy8gZnJvbSBSRkMgMzk4NlxuICAgICAgICBzcGxpdHRlZCA9IHNwbGl0VXJpKHZhbHVlKTtcbiAgICAgICAgc2NoZW1lID0gc3BsaXR0ZWRbMV07IFxuICAgICAgICBhdXRob3JpdHkgPSBzcGxpdHRlZFsyXTtcbiAgICAgICAgcGF0aCA9IHNwbGl0dGVkWzNdO1xuICAgICAgICBxdWVyeSA9IHNwbGl0dGVkWzRdO1xuICAgICAgICBmcmFnbWVudCA9IHNwbGl0dGVkWzVdO1xuXG4gICAgICAgIGlmICghc2NoZW1lKSAgcmV0dXJuO1xuXG4gICAgICAgIGlmKGFsbG93SHR0cHMpIHtcbiAgICAgICAgICAgIGlmIChzY2hlbWUudG9Mb3dlckNhc2UoKSAhPSAnaHR0cHMnKSByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoc2NoZW1lLnRvTG93ZXJDYXNlKCkgIT0gJ2h0dHAnKSByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmdWxseS1xdWFsaWZpZWQgVVJJcyBtdXN0IGhhdmUgYW4gYXV0aG9yaXR5IHNlY3Rpb24gdGhhdCBpc1xuICAgICAgICAvLyBhIHZhbGlkIGhvc3RcbiAgICAgICAgaWYgKCFhdXRob3JpdHkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGVuYWJsZSBwb3J0IGNvbXBvbmVudFxuICAgICAgICBpZiAoLzooXFxkKykkLy50ZXN0KGF1dGhvcml0eSkpIHtcbiAgICAgICAgICAgIHBvcnQgPSBhdXRob3JpdHkubWF0Y2goLzooXFxkKykkLylbMF07XG4gICAgICAgICAgICBhdXRob3JpdHkgPSBhdXRob3JpdHkucmVwbGFjZSgvOlxcZCskLywgJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgb3V0ICs9IHNjaGVtZSArICc6JztcbiAgICAgICAgb3V0ICs9ICcvLycgKyBhdXRob3JpdHk7XG4gICAgICAgIFxuICAgICAgICBpZiAocG9ydCkge1xuICAgICAgICAgICAgb3V0ICs9IHBvcnQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIG91dCArPSBwYXRoO1xuICAgICAgICBcbiAgICAgICAgaWYocXVlcnkgJiYgcXVlcnkubGVuZ3RoKXtcbiAgICAgICAgICAgIG91dCArPSAnPycgKyBxdWVyeTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGZyYWdtZW50ICYmIGZyYWdtZW50Lmxlbmd0aCl7XG4gICAgICAgICAgICBvdXQgKz0gJyMnICsgZnJhZ21lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNfaHR0cHNfaXJpKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBpc19odHRwX2lyaSh2YWx1ZSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNfd2ViX2lyaSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gKGlzX2h0dHBfaXJpKHZhbHVlKSB8fCBpc19odHRwc19pcmkodmFsdWUpKTtcbiAgICB9XG5cbn0pKG1vZHVsZSk7XG4iLCAiaW1wb3J0IHsgUGx1Z2luLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEZST05UTUFUVEVSX0xJTktTX0VESVRPUl9QTFVHSU4gfSBmcm9tICcuL2VkaXRvcl9wbHVnaW4nO1xuaW1wb3J0IHsgb25NZXRhZGF0YUNhY2hlUmVzb2x2ZSB9IGZyb20gJy4vbWV0YWRhdGFfY2FjaGUnO1xuaW1wb3J0IHsgb25WYXVsdEZpbGVSZW5hbWUgfSBmcm9tICcuL3JlbmFtZV9saW5rcyc7XG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTLCBGcm9udG1hdHRlckxpbmtzU2V0dGluZ3MsIEZyb250bWF0dGVyTGlua3NTZXR0aW5nVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZyb250bWF0dGVyTGlua3NQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogRnJvbnRtYXR0ZXJMaW5rc1NldHRpbmdzO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBGcm9udG1hdHRlckxpbmtzU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHRcdHRoaXMucmVnaXN0ZXJFZGl0b3JFeHRlbnNpb24oRlJPTlRNQVRURVJfTElOS1NfRURJVE9SX1BMVUdJTik7XG5cblx0XHRpZiAodGhpcy5zZXR0aW5ncy5hZGRUb0dyYXBoKSB7XG5cdFx0XHRhcHAubWV0YWRhdGFDYWNoZS5pbml0aWFsaXplKCk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgcGx1Z2luID0gdGhpcztcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoYXBwLm1ldGFkYXRhQ2FjaGUub24oXCJyZXNvbHZlXCIsIChmaWxlOiBURmlsZSkgPT4ge1xuXHRcdFx0aWYgKCFwbHVnaW4uc2V0dGluZ3MuYWRkVG9HcmFwaCkgeyByZXR1cm47IH1cblxuXHRcdFx0b25NZXRhZGF0YUNhY2hlUmVzb2x2ZShmaWxlKTtcblx0XHR9KSk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoYXBwLnZhdWx0Lm9uKFwicmVuYW1lXCIsIChmaWxlOiBURmlsZSwgb2xkUGF0aDogc3RyaW5nKSA9PiB7XG5cdFx0XHRpZiAocGx1Z2luLnNldHRpbmdzLnVwZGF0ZUxpbmtzICYmIGFwcC52YXVsdC5nZXRDb25maWcoXCJhbHdheXNVcGRhdGVMaW5rc1wiKSkge1xuXHRcdFx0XHQvLyBvblZhdWx0RmlsZVJlbmFtZShmaWxlLCBvbGRQYXRoLCBwbHVnaW4pO1xuXHRcdFx0fVxuXHRcdH0pKTtcblx0fVxuXG5cdG9udW5sb2FkKCkgeyB9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKFxuXHRcdFx0e30sXG5cdFx0XHRERUZBVUxUX1NFVFRJTkdTLFxuXHRcdFx0YXdhaXQgdGhpcy5sb2FkRGF0YSgpXG5cdFx0KTtcblx0XHR0aGlzLnNldHRpbmdzLnVwZGF0ZUxpbmtzID0gZmFsc2U7XG5cblx0XHR0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBzeW50YXhUcmVlIH0gZnJvbSBcIkBjb2RlbWlycm9yL2xhbmd1YWdlXCI7XG5pbXBvcnQgeyBSYW5nZVNldEJ1aWxkZXIgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivc3RhdGVcIjtcbmltcG9ydCB7IFN5bnRheE5vZGVSZWYgfSBmcm9tIFwiQGxlemVyL2NvbW1vblwiXG5pbXBvcnQgeyBEZWNvcmF0aW9uLCBEZWNvcmF0aW9uU2V0LCBFZGl0b3JWaWV3LCBQbHVnaW5WYWx1ZSwgVmlld1BsdWdpbiwgVmlld1VwZGF0ZSB9IGZyb20gXCJAY29kZW1pcnJvci92aWV3XCI7XG5pbXBvcnQgeyBGcm9udG1hdHRlckxpbmtXaWRnZXQgfSBmcm9tIFwiLi9saW5rX3dpZGdldFwiO1xuaW1wb3J0IHsgaXNVcmkgfSBmcm9tIFwidmFsaWQtdXJsXCI7XG5pbXBvcnQgeyBMaW5rU2xpY2UgfSBmcm9tIFwiLi9saW5rX3NsaWNlXCI7XG5pbXBvcnQgeyBGcm9udG1hdHRlckxpbmtzU2V0dGluZ3MgfSBmcm9tIFwiLi9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGNsYXNzIEZyb250bWF0dGVyTGlua3NFZGl0b3JQbHVnaW4gaW1wbGVtZW50cyBQbHVnaW5WYWx1ZSB7XG4gICAgZGVjb3JhdGlvbnM6IERlY29yYXRpb25TZXQ7XG4gICAgbGlua1NsaWNlczogQXJyYXk8TGlua1NsaWNlPiA9IG5ldyBBcnJheSgpO1xuXG4gICAgY29uc3RydWN0b3IodmlldzogRWRpdG9yVmlldykge1xuICAgICAgICB0aGlzLmxpbmtTbGljZXMgPSBuZXcgQXJyYXk8TGlua1NsaWNlPigpO1xuICAgICAgICB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5idWlsZERlY29yYXRpb25zKHZpZXcpO1xuICAgIH1cblxuICAgIHVwZGF0ZSh1cGRhdGU6IFZpZXdVcGRhdGUpOiB2b2lkIHtcbiAgICAgICAgaWYgKHVwZGF0ZS5kb2NDaGFuZ2VkIHx8IHVwZGF0ZS52aWV3cG9ydENoYW5nZWQgfHwgdXBkYXRlLnNlbGVjdGlvblNldCkge1xuICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuYnVpbGREZWNvcmF0aW9ucyh1cGRhdGUudmlldyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZXN0cm95KCkgeyB9XG5cbiAgICBidWlsZERlY29yYXRpb25zKHZpZXc6IEVkaXRvclZpZXcpOiBEZWNvcmF0aW9uU2V0IHtcbiAgICAgICAgY29uc3QgYnVpbGRlciA9IG5ldyBSYW5nZVNldEJ1aWxkZXI8RGVjb3JhdGlvbj4oKTtcbiAgICAgICAgdGhpcy5saW5rU2xpY2VzID0gbmV3IEFycmF5PExpbmtTbGljZT4oKTtcblxuICAgICAgICB0aGlzLmZpbmRMaW5rcyh2aWV3LCB0aGlzLmxpbmtTbGljZXMpO1xuXG4gICAgICAgIHRoaXMucHJvY2Vzc0xpbmtzKHZpZXcsIGJ1aWxkZXIpO1xuXG4gICAgICAgIHJldHVybiBidWlsZGVyLmZpbmlzaCgpO1xuICAgIH1cblxuICAgIGZpbmRMaW5rcyh2aWV3OiBFZGl0b3JWaWV3LCBsaW5rU2xpY2VzOiBBcnJheTxMaW5rU2xpY2U+KSB7XG4gICAgICAgIC8vIFRPRE86IEZpbmQgYSB3YXkgdG8gYWNjZXNzIHRoZSBwbHVnaW5zIHRocm91Z2ggdGhlIGVkaXRvciBwbHVnaW4ncyBjb25zdHJ1Y3RvciBpbnN0ZWFkLlxuICAgICAgICBjb25zdCBzZXR0aW5nczogRnJvbnRtYXR0ZXJMaW5rc1NldHRpbmdzID0gYXBwLnBsdWdpbnMucGx1Z2luc1tcImZyb250bWF0dGVyLWxpbmtzXCJdLnNldHRpbmdzO1xuXG4gICAgICAgIGxldCBleHRlcm5hbExpbmtGcm9tOiBudW1iZXIgfCBudWxsO1xuICAgICAgICBsZXQgZXh0ZXJuYWxMaW5rVG86IG51bWJlcjtcblxuICAgICAgICBmb3IgKGxldCB7IGZyb20sIHRvIH0gb2Ygdmlldy52aXNpYmxlUmFuZ2VzKSB7XG4gICAgICAgICAgICBzeW50YXhUcmVlKHZpZXcuc3RhdGUpLml0ZXJhdGUoe1xuICAgICAgICAgICAgICAgIGZyb20sXG4gICAgICAgICAgICAgICAgdG8sXG4gICAgICAgICAgICAgICAgZW50ZXIobm9kZTogU3ludGF4Tm9kZVJlZikge1xuICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIGxpbmtzIG91dHNpZGUgb2YgcXVvdGVzLlxuICAgICAgICAgICAgICAgICAgICBpZiAoZXh0ZXJuYWxMaW5rRnJvbSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUubmFtZSA9PT0gXCJobWQtZnJvbnRtYXR0ZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVybmFsTGlua0Zyb20gPSBub2RlLmZyb207XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZXJuYWxMaW5rVG8gPSBub2RlLnRvO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUubmFtZSA9PT0gXCJhdG9tX2htZC1mcm9udG1hdHRlclwiIHx8IG5vZGUubmFtZSA9PT0gXCJkZWZfaG1kLWZyb250bWF0dGVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dCA9IHZpZXcuc3RhdGUuc2xpY2VEb2MoZXh0ZXJuYWxMaW5rRnJvbSwgZXh0ZXJuYWxMaW5rVG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1VyaSh0ZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rU2xpY2VzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxUZXh0OiB0ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogdGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IGV4dGVybmFsTGlua0Zyb20sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bzogZXh0ZXJuYWxMaW5rVG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVybmFsTGlua0Zyb20gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlcm5hbExpbmtUbyA9IG5vZGUudG87XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIGxpbmtzIGluc2lkZSBvZiBxdW90ZXMuXG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLm5hbWUgPT09IFwiaG1kLWZyb250bWF0dGVyX3N0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gdmlldy5zdGF0ZS5zbGljZURvYyhub2RlLmZyb20gKyAxLCBub2RlLnRvIC0gMSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaDogUmVnRXhwTWF0Y2hBcnJheSB8IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaHJlZjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFsaWFzOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWFya2Rvd25MaW5rOiBib29sZWFuIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoID0gdGV4dC5tYXRjaCgvXFxbXFxbKC4rKVxcfCguKylcXF1cXF0vbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmID0gbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpYXMgPSBtYXRjaFsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2ggPSB0ZXh0Lm1hdGNoKC9cXFtcXFsoLispXFxdXFxdL20pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZiA9IG1hdGNoWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtYXRjaCA9IHRleHQubWF0Y2goL1xcWyguKylcXF1cXCgoLispXFwpL20pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZiA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWFzID0gbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Rvd25MaW5rID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNVcmkodGV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmID0gdGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChocmVmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlua1NsaWNlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxUZXh0OiB0ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlhcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogbm9kZS5mcm9tICsgKHNldHRpbmdzLmhpZGVRdW90ZXMgPyAwIDogMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOiBub2RlLnRvIC0gKHNldHRpbmdzLmhpZGVRdW90ZXMgPyAwIDogMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtkb3duTGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm9jZXNzTGlua3ModmlldzogRWRpdG9yVmlldywgYnVpbGRlcjogUmFuZ2VTZXRCdWlsZGVyPERlY29yYXRpb24+KSB7XG4gICAgICAgIGZvciAobGV0IGxpbmtTbGljZSBvZiB0aGlzLmxpbmtTbGljZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnNvckhlYWQgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5tYWluLmhlYWQ7XG5cbiAgICAgICAgICAgIGlmIChsaW5rU2xpY2UuZnJvbSAtIDEgPD0gY3Vyc29ySGVhZCAmJiBjdXJzb3JIZWFkIDw9IGxpbmtTbGljZS50byArIDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlTGluayh2aWV3LCBidWlsZGVyLCBsaW5rU2xpY2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBidWlsZGVyLmFkZChcbiAgICAgICAgICAgICAgICAgICAgbGlua1NsaWNlLmZyb20sXG4gICAgICAgICAgICAgICAgICAgIGxpbmtTbGljZS50byxcbiAgICAgICAgICAgICAgICAgICAgRGVjb3JhdGlvbi5yZXBsYWNlKHsgd2lkZ2V0OiBuZXcgRnJvbnRtYXR0ZXJMaW5rV2lkZ2V0KGxpbmtTbGljZSkgfSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3R5bGVMaW5rKHZpZXc6IEVkaXRvclZpZXcsIGJ1aWxkZXI6IFJhbmdlU2V0QnVpbGRlcjxEZWNvcmF0aW9uPiwgbGlua1NsaWNlOiBMaW5rU2xpY2UpIHtcbiAgICAgICAgLy8gVE9ETzogQ2xlYW4gdXAgdGhpcyBjb2RlLiBJJ20gbm90IHN1cmUgdGhhdCdzIHBvc3NpYmxlIHRob3VnaC5cbiAgICAgICAgY29uc3Qgc2V0dGluZ3M6IEZyb250bWF0dGVyTGlua3NTZXR0aW5ncyA9IGFwcC5wbHVnaW5zLnBsdWdpbnNbXCJmcm9udG1hdHRlci1saW5rc1wiXS5zZXR0aW5ncztcbiAgICAgICAgY29uc3QgdW5yZXNvbHZlZCA9ICEoYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QobGlua1NsaWNlLmhyZWYsIFwiXCIpIGluc3RhbmNlb2YgVEZpbGUpO1xuICAgICAgICBjb25zdCB0ZXh0ID0gdmlldy5zdGF0ZS5zbGljZURvYyhsaW5rU2xpY2UuZnJvbSwgbGlua1NsaWNlLnRvKTtcblxuICAgICAgICBsZXQgbWF0Y2g6IFJlZ0V4cE1hdGNoQXJyYXkgfCBudWxsO1xuICAgICAgICBpZiAobWF0Y2ggPSB0ZXh0Lm1hdGNoKC9cXFtcXFsoLispXFx8KC4rKVxcXVxcXS9tKSkge1xuICAgICAgICAgICAgYnVpbGRlci5hZGQoXG4gICAgICAgICAgICAgICAgbGlua1NsaWNlLmZyb20gKyAoc2V0dGluZ3MuaGlkZVF1b3RlcyA/IDEgOiAwKSxcbiAgICAgICAgICAgICAgICBsaW5rU2xpY2UuZnJvbSArIDIgKyAoc2V0dGluZ3MuaGlkZVF1b3RlcyA/IDEgOiAwKSxcbiAgICAgICAgICAgICAgICBEZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1mb3JtYXR0aW5nLWxpbmsgY20tZm9ybWF0dGluZy1saW5rLXN0YXJ0XCIgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBidWlsZGVyLmFkZChcbiAgICAgICAgICAgICAgICBsaW5rU2xpY2UuZnJvbSArIHRleHQuaW5kZXhPZihtYXRjaFsxXSksXG4gICAgICAgICAgICAgICAgbGlua1NsaWNlLmZyb20gKyB0ZXh0LmluZGV4T2YobWF0Y2hbMV0pICsgbWF0Y2hbMV0ubGVuZ3RoLFxuICAgICAgICAgICAgICAgIERlY29yYXRpb24ubWFyayh7IGNsYXNzOiBcImNtLWxpbmtcIiArICh1bnJlc29sdmVkID8gXCIgaXMtdW5yZXNvbHZlZFwiIDogXCJcIikgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBidWlsZGVyLmFkZChcbiAgICAgICAgICAgICAgICBsaW5rU2xpY2UuZnJvbSArIHRleHQuaW5kZXhPZihtYXRjaFsxXSkgKyBtYXRjaFsxXS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgbGlua1NsaWNlLmZyb20gKyB0ZXh0LmluZGV4T2YobWF0Y2hbMV0pICsgbWF0Y2hbMV0ubGVuZ3RoICsgMSxcbiAgICAgICAgICAgICAgICBEZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1obWQtaW50ZXJuYWwtbGlua1wiIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYnVpbGRlci5hZGQoXG4gICAgICAgICAgICAgICAgbGlua1NsaWNlLmZyb20gKyB0ZXh0LmluZGV4T2YobWF0Y2hbMl0pLFxuICAgICAgICAgICAgICAgIGxpbmtTbGljZS5mcm9tICsgdGV4dC5pbmRleE9mKG1hdGNoWzJdKSArIG1hdGNoWzJdLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBEZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1saW5rXCIgKyAodW5yZXNvbHZlZCA/IFwiIGlzLXVucmVzb2x2ZWRcIiA6IFwiXCIpIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYnVpbGRlci5hZGQoXG4gICAgICAgICAgICAgICAgbGlua1NsaWNlLnRvIC0gMiAtIChzZXR0aW5ncy5oaWRlUXVvdGVzID8gMSA6IDApLFxuICAgICAgICAgICAgICAgIGxpbmtTbGljZS50byAtIChzZXR0aW5ncy5oaWRlUXVvdGVzID8gMSA6IDApLFxuICAgICAgICAgICAgICAgIERlY29yYXRpb24ubWFyayh7IGNsYXNzOiBcImNtLWZvcm1hdHRpbmctbGluayBjbS1mb3JtYXR0aW5nLWxpbmstZW5kXCIgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAobWF0Y2ggPSB0ZXh0Lm1hdGNoKC9cXFtcXFsoLispXFxdXFxdL20pKSB7XG4gICAgICAgICAgICBidWlsZGVyLmFkZChcbiAgICAgICAgICAgICAgICBsaW5rU2xpY2UuZnJvbSArIChzZXR0aW5ncy5oaWRlUXVvdGVzID8gMSA6IDApLFxuICAgICAgICAgICAgICAgIGxpbmtTbGljZS5mcm9tICsgMiArIChzZXR0aW5ncy5oaWRlUXVvdGVzID8gMSA6IDApLFxuICAgICAgICAgICAgICAgIERlY29yYXRpb24ubWFyayh7IGNsYXNzOiBcImNtLWZvcm1hdHRpbmctbGluayBjbS1mb3JtYXR0aW5nLWxpbmstc3RhcnRcIiB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuYWRkKFxuICAgICAgICAgICAgICAgIGxpbmtTbGljZS5mcm9tICsgdGV4dC5pbmRleE9mKG1hdGNoWzFdKSxcbiAgICAgICAgICAgICAgICBsaW5rU2xpY2UuZnJvbSArIHRleHQuaW5kZXhPZihtYXRjaFsxXSkgKyBtYXRjaFsxXS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20tbGlua1wiICsgKHVucmVzb2x2ZWQgPyBcIiBpcy11bnJlc29sdmVkXCIgOiBcIlwiKSB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGJ1aWxkZXIuYWRkKFxuICAgICAgICAgICAgICAgIGxpbmtTbGljZS50byAtIDIgLSAoc2V0dGluZ3MuaGlkZVF1b3RlcyA/IDEgOiAwKSxcbiAgICAgICAgICAgICAgICBsaW5rU2xpY2UudG8gLSAoc2V0dGluZ3MuaGlkZVF1b3RlcyA/IDEgOiAwKSxcbiAgICAgICAgICAgICAgICBEZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1mb3JtYXR0aW5nLWxpbmsgY20tZm9ybWF0dGluZy1saW5rLWVuZFwiIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoID0gdGV4dC5tYXRjaCgvXFxbKC4rKVxcXShcXCguK1xcKSkvbSkpIHtcbiAgICAgICAgICAgIGJ1aWxkZXIuYWRkKFxuICAgICAgICAgICAgICAgIGxpbmtTbGljZS5mcm9tICsgKHNldHRpbmdzLmhpZGVRdW90ZXMgPyAxIDogMCksXG4gICAgICAgICAgICAgICAgbGlua1NsaWNlLmZyb20gKyAxICsgKHNldHRpbmdzLmhpZGVRdW90ZXMgPyAxIDogMCksXG4gICAgICAgICAgICAgICAgRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20tZm9ybWF0dGluZy1saW5rIGNtLWZvcm1hdHRpbmctbGluay1zdGFydFwiIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYnVpbGRlci5hZGQoXG4gICAgICAgICAgICAgICAgbGlua1NsaWNlLmZyb20gKyB0ZXh0LmluZGV4T2YobWF0Y2hbMV0pLFxuICAgICAgICAgICAgICAgIGxpbmtTbGljZS5mcm9tICsgdGV4dC5pbmRleE9mKG1hdGNoWzFdKSArIG1hdGNoWzFdLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBEZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1saW5rXCIgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBidWlsZGVyLmFkZChcbiAgICAgICAgICAgICAgICBsaW5rU2xpY2UuZnJvbSArIHRleHQuaW5kZXhPZihcIl1cIiksXG4gICAgICAgICAgICAgICAgbGlua1NsaWNlLmZyb20gKyB0ZXh0LmluZGV4T2YoXCJdXCIpICsgMSxcbiAgICAgICAgICAgICAgICBEZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogXCJjbS1mb3JtYXR0aW5nLWxpbmsgY20tZm9ybWF0dGluZy1saW5rLWVuZFwiIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYnVpbGRlci5hZGQoXG4gICAgICAgICAgICAgICAgbGlua1NsaWNlLmZyb20gKyB0ZXh0LmluZGV4T2YobWF0Y2hbMl0pLFxuICAgICAgICAgICAgICAgIGxpbmtTbGljZS5mcm9tICsgdGV4dC5pbmRleE9mKG1hdGNoWzJdKSArIG1hdGNoWzJdLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBEZWNvcmF0aW9uLm1hcmsoeyBjbGFzczogaXNVcmkobGlua1NsaWNlLmhyZWYpID8gXCJleHRlcm5hbC1saW5rXCIgOiBcImNtLXVybFwiIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoID0gdGV4dC5tYXRjaCgvXFxcIiguKylcXFwiL20pKSB7XG4gICAgICAgICAgICBidWlsZGVyLmFkZChcbiAgICAgICAgICAgICAgICBsaW5rU2xpY2UuZnJvbSArIHRleHQuaW5kZXhPZihtYXRjaFsxXSksXG4gICAgICAgICAgICAgICAgbGlua1NsaWNlLmZyb20gKyB0ZXh0LmluZGV4T2YobWF0Y2hbMV0pICsgbWF0Y2hbMV0ubGVuZ3RoLFxuICAgICAgICAgICAgICAgIERlY29yYXRpb24ubWFyayh7IGNsYXNzOiBcImNtLXVybFwiIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKGlzVXJpKHRleHQpKSB7XG4gICAgICAgICAgICBidWlsZGVyLmFkZChcbiAgICAgICAgICAgICAgICBsaW5rU2xpY2UuZnJvbSxcbiAgICAgICAgICAgICAgICBsaW5rU2xpY2UudG8sXG4gICAgICAgICAgICAgICAgRGVjb3JhdGlvbi5tYXJrKHsgY2xhc3M6IFwiY20tdXJsXCIgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBGUk9OVE1BVFRFUl9MSU5LU19FRElUT1JfUExVR0lOID0gVmlld1BsdWdpbi5mcm9tQ2xhc3MoRnJvbnRtYXR0ZXJMaW5rc0VkaXRvclBsdWdpbiwge1xuICAgIGRlY29yYXRpb25zOiAodmFsdWU6IEZyb250bWF0dGVyTGlua3NFZGl0b3JQbHVnaW4pID0+IHZhbHVlLmRlY29yYXRpb25zXG59KTtcbiIsICJpbXBvcnQgeyBFZGl0b3JWaWV3LCBXaWRnZXRUeXBlIH0gZnJvbSBcIkBjb2RlbWlycm9yL3ZpZXdcIjtcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBpc1VyaSB9IGZyb20gXCJ2YWxpZC11cmxcIjtcbmltcG9ydCB7IExpbmtTbGljZSB9IGZyb20gXCIuL2xpbmtfc2xpY2VcIjtcblxuZXhwb3J0IGNsYXNzIEZyb250bWF0dGVyTGlua1dpZGdldCBleHRlbmRzIFdpZGdldFR5cGUge1xuICAgIHByaXZhdGUgbGlua1NsaWNlOiBMaW5rU2xpY2U7XG5cbiAgICBjb25zdHJ1Y3RvcihsaW5rU2xpY2U6IExpbmtTbGljZSkge1xuICAgICAgICBzdXBlcigpXG4gICAgICAgIHRoaXMubGlua1NsaWNlID0gbGlua1NsaWNlO1xuICAgIH1cblxuICAgIHRvRE9NKHZpZXc6IEVkaXRvclZpZXcpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGFFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICAgIGFFbGVtZW50LmhyZWYgPSB0aGlzLmxpbmtTbGljZS5ocmVmO1xuICAgICAgICBhRWxlbWVudC5pbm5lclRleHQgPSB0aGlzLmxpbmtTbGljZS5hbGlhcyB8fCB0aGlzLmxpbmtTbGljZS5ocmVmO1xuXG4gICAgICAgIGlmIChpc1VyaSh0aGlzLmxpbmtTbGljZS5ocmVmKSkge1xuICAgICAgICAgICAgYUVsZW1lbnQuYWRkQ2xhc3ModGhpcy5saW5rU2xpY2UubWFya2Rvd25MaW5rID8gXCJleHRlcm5hbC1saW5rXCIgOiBcImNtLXVybFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFFbGVtZW50LmFkZENsYXNzKFwiaW50ZXJuYWwtbGlua1wiKTtcblxuICAgICAgICAgICAgaWYgKCEoYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QodGhpcy5saW5rU2xpY2UuaHJlZiwgXCJcIikgaW5zdGFuY2VvZiBURmlsZSkgJiYgIXRoaXMubGlua1NsaWNlLm1hcmtkb3duTGluaykge1xuICAgICAgICAgICAgICAgIGFFbGVtZW50LmFkZENsYXNzKFwiaXMtdW5yZXNvbHZlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhRWxlbWVudDtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IGlzVXJpIH0gZnJvbSBcInZhbGlkLXVybFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gb25NZXRhZGF0YUNhY2hlUmVzb2x2ZShmaWxlOiBURmlsZSkge1xuICAgIGNvbnN0IGNhY2hlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgIGlmICghY2FjaGUpIHsgcmV0dXJuOyB9XG5cbiAgICBjb25zdCBmcm9udG1hdHRlciA9IGNhY2hlLmZyb250bWF0dGVyO1xuICAgIGlmICghZnJvbnRtYXR0ZXIpIHsgcmV0dXJuOyB9XG5cbiAgICBhZGRGcm9udG1hdHRlckxpbmtzVG9DYWNoZShmaWxlLCBmcm9udG1hdHRlcik7XG59XG5cbmZ1bmN0aW9uIGFkZEZyb250bWF0dGVyTGlua3NUb0NhY2hlKGZpbGU6IFRGaWxlLCBmcm9udG1hdHRlcjogYW55KSB7XG4gICAgaWYgKCFmcm9udG1hdHRlcikgeyByZXR1cm47IH1cbiAgICBmb3IgKGxldCBrZXkgb2YgT2JqZWN0LmtleXMoZnJvbnRtYXR0ZXIpKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZnJvbnRtYXR0ZXJba2V5XTtcbiAgICAgICAgaWYgKHR5cGVvZih2YWx1ZSkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoOiBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCA9IHZhbHVlLm1hdGNoKC9cXFtcXFsoLispXFx8LitcXF1cXF0vbSkgfHwgdmFsdWUubWF0Y2goL1xcW1xcWyguKylcXF1cXF0vbSkgfHwgdmFsdWUubWF0Y2goL1xcWy4rXFxdXFwoKC4rKVxcKS9tKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFtYXRjaCkgeyBjb250aW51ZTsgfVxuICAgICAgICAgICAgbGV0IGhyZWYgPSBtYXRjaFsxXTtcblxuICAgICAgICAgICAgaWYgKGlzVXJpKGhyZWYpKSB7IGNvbnRpbnVlOyB9XG5cbiAgICAgICAgICAgIGxldCBmID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QoaHJlZiwgXCJcIik7XG4gICAgICAgICAgICBsZXQgbGlua3M6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIG51bWJlcj4+O1xuICAgICAgICAgICAgaWYgKGYgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGhyZWYgPSBmLnBhdGg7XG4gICAgICAgICAgICAgICAgbGlua3MgPSBhcHAubWV0YWRhdGFDYWNoZS5yZXNvbHZlZExpbmtzO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsaW5rcyA9IGFwcC5tZXRhZGF0YUNhY2hlLnVucmVzb2x2ZWRMaW5rcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxpbmtzW2ZpbGUucGF0aF1baHJlZl0pIHtcbiAgICAgICAgICAgICAgICBsaW5rc1tmaWxlLnBhdGhdW2hyZWZdICs9IDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpbmtzW2ZpbGUucGF0aF1baHJlZl0gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZih2YWx1ZSkgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIGFkZEZyb250bWF0dGVyTGlua3NUb0NhY2hlKGZpbGUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFRvZ2dsZUNvbXBvbmVudCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IEZyb250bWF0dGVyTGlua3NQbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZyb250bWF0dGVyTGlua3NTZXR0aW5ncyB7XG4gICAgaGlkZVF1b3RlczogYm9vbGVhbixcbiAgICBhZGRUb0dyYXBoOiBib29sZWFuLFxuICAgIHVwZGF0ZUxpbmtzOiBib29sZWFuLFxufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUGFydGlhbDxGcm9udG1hdHRlckxpbmtzU2V0dGluZ3M+ID0ge1xuICAgIGhpZGVRdW90ZXM6IGZhbHNlLFxuICAgIGFkZFRvR3JhcGg6IHRydWUsXG4gICAgdXBkYXRlTGlua3M6IHRydWUsXG59O1xuXG5leHBvcnQgY2xhc3MgRnJvbnRtYXR0ZXJMaW5rc1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBwcml2YXRlIHBsdWdpbjogRnJvbnRtYXR0ZXJMaW5rc1BsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEZyb250bWF0dGVyTGlua3NQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCkge1xuICAgICAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJIaWRlIHF1b3RhdGlvbiBtYXJrc1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJEb24ndCByZW5kZXIgcXVvdGF0aW9uIG1hcmtzIHN1cnJvdW5kaW5nIGZyb250bWF0dGVyIGxpbmtzLlwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgoY29tcG9uZW50OiBUb2dnbGVDb21wb25lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZVF1b3Rlcyk7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50Lm9uQ2hhbmdlKCh2YWx1ZTogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlUXVvdGVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJBZGQgdG8gZ3JhcGhcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiQWRkIGZyb250bWF0dGVyIGxpbmsgY29ubmVjdGlvbnMgdG8gdGhlIGdyYXBoIHZpZXcuXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKChjb21wb25lbnQ6IFRvZ2dsZUNvbXBvbmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hZGRUb0dyYXBoKTtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQub25DaGFuZ2UoKHZhbHVlOiBib29sZWFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGFwcC5tZXRhZGF0YUNhY2hlLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYWRkVG9HcmFwaCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgbmV3IFNldHRpbmcodGhpcy5jb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQXV0b21hdGljYWxseSB1cGRhdGUgaW50ZXJuYWwgZnJvbnRtYXR0ZXIgbGlua3NcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiVHVybiBvbiB0byB1cGRhdGUgZnJvbnRtYXR0ZXIgbGlua3Mgd2hlbiBhIG5vdGUgaXMgcmVuYW1lZC48YnI+J0F1dG9tYXRpY2FsbHkgdXBkYXRlIGludGVybmFsIGxpbmtzJyBpbiAnRmlsZXMgJiBMaW5rcycgbXVzdCBhbHNvIGJlIGVuYWJsZWQuXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcbiAgICAgICAgICAgICAgICBjcmVhdGVGcmFnbWVudChlbCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVsLmFwcGVuZFRleHQoXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlR1cm4gb24gdG8gdXBkYXRlIGZyb250bWF0dGVyIGxpbmtzIHdoZW4gYSBub3RlIGlzIHJlbmFtZWQuXCIgXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGVsLmNyZWF0ZUVsKFwiYnJcIik7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVsLmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNsczogXCJtb2Qtd2FybmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGV4dDogXCInQXV0b21hdGljYWxseSB1cGRhdGUgaW50ZXJuYWwgbGlua3MnIGluICdGaWxlcyAmIExpbmtzJyBtdXN0IGFsc28gYmUgZW5hYmxlZC5cIlxuICAgICAgICAgICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgICAgICAgICAgZWwuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xzOiBcIm1vZC13YXJuaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIkRpc2FibGVkIGJlY2F1c2UgaXQgd2FzIGNhdXNpbmcgaXNzdWVzLiBXaWxsIGZpeCBuZXh0IHdlZWsgYWZ0ZXIgZmluYWxzLiBTb3JyeS5cIlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgoY29tcG9uZW50OiBUb2dnbGVDb21wb25lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudXBkYXRlTGlua3MpO1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC5vbkNoYW5nZSgodmFsdWU6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudXBkYXRlTGlua3MgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnNldERpc2FibGVkKHRydWUpO1xuICAgIH1cblxuICAgIGhpZGUoKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUEsSUFBQyxVQUFTLFNBQVE7QUFDZDtBQUVBLGNBQU8sUUFBUSxTQUFTO0FBQ3hCLGNBQU8sUUFBUSxjQUFjO0FBQzdCLGNBQU8sUUFBUSxlQUFlO0FBQzlCLGNBQU8sUUFBUSxhQUFhO0FBRTVCLGNBQU8sUUFBUSxRQUFRO0FBQ3ZCLGNBQU8sUUFBUSxZQUFZO0FBQzNCLGNBQU8sUUFBUSxhQUFhO0FBQzVCLGNBQU8sUUFBUSxXQUFXO0FBSzFCLFVBQUksV0FBVyxTQUFTLEtBQUs7QUFDekIsWUFBSSxXQUFXLElBQUksTUFBTSxzRUFBc0U7QUFDL0YsZUFBTztBQUFBLE1BQ1g7QUFFQSxzQkFBZ0IsT0FBTztBQUNuQixZQUFJLENBQUMsT0FBTztBQUNSO0FBQUEsUUFDSjtBQUdBLFlBQUksMkRBQTJELEtBQUssS0FBSztBQUFHO0FBRzVFLFlBQUksY0FBYyxLQUFLLEtBQUs7QUFBRztBQUMvQixZQUFJLDRCQUE0QixLQUFLLEtBQUs7QUFBRztBQUU3QyxZQUFJLFdBQVcsQ0FBQztBQUNoQixZQUFJLFNBQVM7QUFDYixZQUFJLFlBQVk7QUFDaEIsWUFBSSxPQUFPO0FBQ1gsWUFBSSxRQUFRO0FBQ1osWUFBSSxXQUFXO0FBQ2YsWUFBSSxNQUFNO0FBR1YsbUJBQVcsU0FBUyxLQUFLO0FBQ3pCLGlCQUFTLFNBQVM7QUFDbEIsb0JBQVksU0FBUztBQUNyQixlQUFPLFNBQVM7QUFDaEIsZ0JBQVEsU0FBUztBQUNqQixtQkFBVyxTQUFTO0FBR3BCLFlBQUksQ0FBRSxXQUFVLE9BQU8sVUFBVSxLQUFLLFVBQVU7QUFBSTtBQUdwRCxZQUFJLGFBQWEsVUFBVSxRQUFRO0FBQy9CLGNBQUksQ0FBRSxNQUFLLFdBQVcsS0FB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
